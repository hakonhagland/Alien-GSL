name: linux-install
on: [push, pull_request]
jobs:
  build-dist:
    runs-on: macos-10.15
    steps:
      - uses: actions/checkout@v2
      - name: setup perl locallib
        run: .github/scripts/setup_perl_locallib.sh
      - name: install cpanm
        run: cpan App::cpanminus
      - name: install dependencies
        run: |
          cpanm -v Alien::Build
          cpanm -v --installdeps .
      - name: install module
        run: |
          perl Makefile.PL
          make
          make test
          make install
